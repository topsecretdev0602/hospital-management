<div class="row"  *ngIf="!showBirthCertificate && !showDeathCertificate">
    <div *ngIf="showSummaryView">
         <discharge-summary-view [selectedADT]="selectedDischarge"
                                [showSummaryView]="showSummaryView"></discharge-summary-view>
    </div>
    <div *ngIf="showDischargeSummary">
        <form [formGroup]="CurrentDischargeSummary.DischargeSummaryValidator" class="form-horizontal">
            <div class="form-body">
                <div class="col-md-12 col-xs-12">
                    <div class="col-md-4" style="float:left;">
                        <p class="patient-hdr-label"><b>Name</b>&nbsp;:&nbsp;{{selectedDischarge.Name}}
                            ({{selectedDischarge.PatientCode}})&nbsp;&nbsp;</p>
                        <p class="patient-hdr-label"><b>Age/Sex</b>&nbsp;:
                            {{selectedDischarge.DateOfBirth | DanpheDateTime:'age' }}/{{selectedDischarge.Gender}}</p>
                        <p class="patient-hdr-label"><b>Address</b>&nbsp;:
                            {{selectedDischarge.Address}}</p>
                        <p class="patient-hdr-label"><b>Contact No</b>&nbsp;:
                            {{selectedDischarge.PhoneNumber}}</p>

                    </div>
                    <div class="col-md-4">
                        <p class="patient-hdr-label"><b>Hospital No</b>&nbsp;:
                            {{selectedDischarge.VisitCode}}</p>
                        <p class="patient-hdr-label"><b>InPatient No</b>&nbsp;:
                            {{selectedDischarge.PatientCode}}</p>
                        <p class="patient-hdr-label"><b>Guardian Name</b>&nbsp;:
                            {{selectedDischarge.GuardianName}}</p>
                        <p class="patient-hdr-label"><b>Guardian Relation</b>&nbsp;:
                            {{selectedDischarge.GuardianRelation}}</p>

                    </div>
                    <div class="col-md-4" style="float:right">
                        <p class="patient-hdr-label"><b>Admitted
                                On</b>&nbsp;:&nbsp;{{selectedDischarge.AdmittedDate | DanpheDateTime:'format':'YYYY-MM-DD HH:mm' }}
                        </p>
                        <p *ngIf="selectedDischarge.ModuleName != 'emergency'" class="patient-hdr-label">
                            <b>Ward</b>&nbsp;: {{selectedDischarge.BedInformation.Ward}}</p>
                        <p *ngIf="selectedDischarge.ModuleName != 'emergency'" class="patient-hdr-label">
                            <b>Bed Number</b>&nbsp;:
                            {{selectedDischarge.BedInformation.BedNumber}}</p>
                        <p class="patient-hdr-label"><b>Discharged
                                On</b>&nbsp;:&nbsp;{{selectedDischarge.DischargedDate | DanpheDateTime:'format':'YYYY-MM-DD HH:mm'}}
                        </p>
                    </div>
                </div>
                <!--<customer-header [header-title]="'Inpatient Discharge Ticket'"></customer-header>-->
                <div class="col-md-12" style="margin-bottom: 15px;">
                  <hr style="border:1px solid black;margin-top: 0px;margin-bottom: 5px;" />
                  <div class="col-md-2">
                    <!-- <h5>Discharge Summary of <b>{{selectedDischarge.Name}}</b>({{selectedDischarge.PatientCode}})
    </h5> -->
                  </div>
                  <div class="col-md-10">
                    <input style="width: 20%;margin-right: 30px;float: right;" class="btn blue" type="button" (click)="Save()" *ngIf="!update" value="Save" />
                    <input style="width: 20%;margin-right: 30px;float: right;" class="btn blue" type="button" (click)="Update()" *ngIf="update" value="Update" />
                    <input style="width: 30%;margin-right: 30px;float: right;" class="btn blue" type="button" (click)="SubmitAndViewSummary()" *ngIf="update" value="Submit and Print Summary" />
                    <input style="width: 20%;margin-right: 30px;float: right;" class="btn blue" type="button" (click)="ViewBirthCertificate()" *ngIf="update && DeliveryType" value="Edit Birth Certificate" />
                    <input style="width: 20%;margin-right: 30px;float: right;" class="btn blue" type="button" (click)="ViewDeathCertificate()" *ngIf="update && Isdeath" value="Edit Death Certificate" />
                  
                  </div>
                </div>

                <div class="col-md-12">
                  <div class="col-md-6 col-xs-12">
                    <div class="form-group">
                      <label class="control-label col-md-4">Discharge Type<b class="color-red">  *</b><b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <select class="form-control" [(ngModel)]="CurrentDischargeSummary.DischargeTypeId" 
                                formControlName="DischargeTypeId" (change)="OnChangeDischargeType($event.target.value)">
                          <option *ngFor="let type of dischargeTypeList"
                                  value="{{type.DischargeTypeId}}">
                            {{type.DischargeTypeName}}
                          </option>
                        </select>
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('DischargeTypeId')" [hidden]="CurrentDischargeSummary.IsValidCheck('DischargeTypeId','required')">DischargeType is required</span>
                      </div>
                    </div>

                    <div class="form-group" *ngIf="DischargeConditionType">
                      <label class="control-label col-md-4">Discharge Condition<b class="color-red">  *</b><b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <select class="form-control"    formControlName="DischargeConditionId" [(ngModel)]="CurrentDischargeSummary.DischargeConditionId" 
                                (change)="OnChangeDischargeConditionType($event.target.value)">
                          <option *ngFor="let type of FilteredDischargeConditions"
                                  value="{{type.DischargeConditionId}}">
                            {{type.Condition}}
                          </option>
                        </select>
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('DischargeConditionId')" [hidden]="CurrentDischargeSummary.IsValidCheck('DischargeConditionId','required')">Discharge Condition is required</span>
                      </div>
                    </div>
                    <div class="form-group" *ngIf="DeliveryType">
                      <label class="control-label col-md-4">Delivery Type<b class="color-red">  *</b><b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <select class="form-control"  formControlName="DeliveryTypeId" [(ngModel)]="CurrentDischargeSummary.DeliveryTypeId">
                          <option *ngFor="let type of deliveryTypeList"
                                  value="{{type.DeliveryTypeId}}">
                            {{type.DeliveryTypeName}}
                          </option>
                        </select>
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('DeliveryTypeId')" [hidden]="CurrentDischargeSummary.IsValidCheck('DeliveryTypeId','required')">DeliveryType is required</span>
                     
                      </div>
                    </div>
                    <div class="form-group" *ngIf="DeliveryType">
                      <label class="control-label col-md-4">Baby Birth Condition<b class="color-red">  *</b><b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <select class="form-control"  formControlName="BabyBirthConditionId"  [(ngModel)]="CurrentDischargeSummary.BabyBirthConditionId">
                          <option *ngFor="let type of babybirthCondition"
                                  value="{{type.BabyBirthConditionId}}">
                            {{type.BirthConditionType}}
                          </option>
                        </select>
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('BabyBirthConditionId')" [hidden]="CurrentDischargeSummary.IsValidCheck('BabyBirthConditionId','required')">Baby Birth Condition is required</span>
                      </div>
                    </div>
                    <div class="form-group" *ngIf="Isdeath">
                      <label class="control-label col-md-4">Death Type<b class="color-red">  *</b><b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <select class="form-control"  formControlName="DeathTypeId"  [(ngModel)]="CurrentDischargeSummary.DeathTypeId">
                          <option *ngFor="let type of deathTypeList"
                                  value="{{type.DeathTypeId}}">
                            {{type.DeathType}}
                          </option>
                        </select>    
                         <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('DeathTypeId')" [hidden]="CurrentDischargeSummary.IsValidCheck('DeathTypeId','required')">Death type is required</span>
                       </div>
                    </div>
                   
                    <div class="form-group" *ngIf="DeliveryType">
                        <span style="padding-left: 15px;"><b>Baby Details</b></span><br>
                        <div class="row">
                          <div class="col-md-12">
                        <label class="col-md-3">Father's Name<b class="color-red">*</b><b>:</b></label>
                              <input type="text" class="form-control col-md-3"  formControlName="BabysFathersName" max="20"
                               [(ngModel)]="CurrentDischargeSummary.BabysFathersName" style="width:130px;"
                                     placeholder="Fathers Name"
                                     name="BabysFathersName" />
                             <label class="col-md-3">No of babies<b class="color-red">*</b><b>:</b></label>
                          <input type="number" class="form-control col-md-3" [(ngModel)]="NoOfBabies" style="width:130px;"
                                     [ngModelOptions]="{standalone: true}" placeholder="NoOfBabies" min="1"
                                     name="NoOfBabies" (ngModelChange)="onChangeNumber()">  
                                    </div></div>
                        <br>
                      <div *ngIf="showBabyDetails" style="padding-top: 5px;" class="col-md-12">
                          <table class="table-bordered" style="width:95%">
                                  <tr>
                                     <td style="padding-left: 5px;">Certificate No.</td>
                                     <td style="padding-left: 5px;">Sex</td>
                                     <td style="padding-left: 5px;">Weight(grams)</td>
                                     <td style="padding-left: 5px;">BirthDate</td>
                                     <td style="padding-left: 5px;">BirthTime</td>
                                  </tr>
                                  <tr *ngFor="let baby of CurrentDischargeSummary.BabyBirthDetails;let i=index">
                                                    <td class="form-group">
                                                              <label   title="Autogenerated Certificate No" class="form-control" max="10" style="width:100px;overflow: hidden;">{{baby.CertificateNumber}}</label>    
                                                     </td>
                                                    <td class="form-group"  style="padding-left: 5px;">
                                                      <form [formGroup]="baby.BabyBirthDetailsValidator">
                                                        <select  class="form-control"  formControlName="Sex" [(ngModel)]="baby.Sex" placeholder="Sex"  style="width:90px;height: 33px;" title="select baby's sex">
                                                          <option value="Male" selected>Male</option>
                                                          <option value="Female">Female</option>
                                                          <option value="Other">Other</option>
                                                        </select>
                                                        <span class="color-red" *ngIf="baby.IsDirty('Sex')"
                                                              [hidden]="baby.IsValidCheck('Sex','required')">Required</span>
                                                      </form>
                                                    </td>
                                                    <td class="form-group"  style="padding-left: 5px;">
                                                      <form [formGroup]="baby.BabyBirthDetailsValidator">
                                                        <input type="number" class="form-control" formControlName="WeightOfBaby" step="100" max="10000" [(ngModel)]="baby.WeightOfBaby" style="width:90px;"
                                                              placeholder="WeightOfBaby"
                                                               name="WeightOfBaby" />
                                                               <span class="color-red" *ngIf="baby.IsDirty('WeightOfBaby')"
                                                               [hidden]="baby.IsValidCheck('WeightOfBaby','required')">Required</span>
                                                      </form>
                                                    </td>
                                                    <td  style="padding-left: 5px;">
                                                        <form [formGroup]="baby.BabyBirthDetailsValidator">
                                                            <input type="date" class="form-control"  max="100"  formControlName="BirthDate" [(ngModel)]="baby.BirthDate" style="width:130px;"
                                                                placeholder="BirthDate"
                                                                   name="BirthDate"  />
                                                                   <span class="color-red" *ngIf="baby.IsDirty('BirthDate')"
                                                                   [hidden]="baby.IsValidCheck('BirthDate','required')">Required</span>
                                                          </form>
                                                    </td>
                                                    <td  style="padding-left: 5px;">
                                                        <form [formGroup]="baby.BabyBirthDetailsValidator">
                                                            <input type="time" max="100" class="form-control"  formControlName="BirthTime" [(ngModel)]="baby.BirthTime" style="width:100px;"
                                                                   placeholder="BirthTime"
                                                                   name="BirthTime" />
                                                                   <span class="color-red" *ngIf="baby.IsDirty('BirthTime')"
                                                                   [hidden]="baby.IsValidCheck('BirthTime','required')">Required</span>
                                                          </form>
                                                    </td>
                                  </tr>
                            </table>
                      </div>
                    </div>

                    <!--commented: Ramavtar-16Jan18,commmented/replaced dropdown doctor selector with autocomplete doctor selector-->
                    <!--<div class="form-group">
        <label class="control-label col-md-4">Consultant<b class="color-red">  *</b><b style="float:right;">:</b></label>
        <div class="col-md-8">
            <select class="form-control" [(ngModel)]="CurrentDischargeSummary.ConsultantId"
                    formControlName="ConsultantId">
                <option *ngFor="let emp of providerList"
                        value="{{emp.EmployeeId}}">
                    {{emp.Salutation}}.{{emp.FirstName}} {{emp.MiddleName}} {{emp.LastName}}
                </option>
            </select>
            <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('ConsultantId')" [hidden]="CurrentDischargeSummary.IsValidCheck('ConsultantId','required')">Consultant is required</span>
        </div>
    </div>-->

                    <div class="form-group">
                      <label class="control-label col-md-4">Consultant<b class="color-red"> *</b><b style="float:right">:</b></label>
                      <div class="col-md-8">
                        <input danphe-auto-complete class="form-control" [(ngModel)]="consultant" [source]="providerList" [list-formatter]="myListFormatter"
                               placeholder="Consultant name" display-property-name="FullName" value-property-name=null (valueChanged)="loadConsultant()"
                               min-chars="0" max-num-list="10" formControlName="ConsultantId" />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('ConsultantId')" [hidden]="CurrentDischargeSummary.IsValidCheck('ConsultantId','required')">Consultant is required</span>
                      </div>
                    </div>

                    <!--<div class="form-group">
        <label class="control-label col-md-4">Doctor Incharge<b class="color-red">  *</b><b style="float:right;">:</b></label>
        <div class="col-md-8">

            <select class="form-control" [(ngModel)]="CurrentDischargeSummary.DoctorInchargeId"
                    formControlName="DoctorInchargeId">
                <option *ngFor="let emp of providerList"
                        value="{{emp.EmployeeId}}">
                    {{emp.Salutation}}.{{emp.FirstName}} {{emp.MiddleName}} {{emp.LastName}}
                </option>
            </select>
            <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('DoctorInchargeId')" [hidden]="CurrentDischargeSummary.IsValidCheck('DoctorInchargeId','required')">Doctor Incharge is required</span>
        </div>
    </div>-->

                    <div class="form-group">
                      <label class="control-label col-md-4">Doctor Incharge<b class="color-red"> *</b><b style="float:right">:</b></label>
                      <div class="col-md-8">
                        <input danphe-auto-complete class="form-control" [(ngModel)]="drIncharge" [source]="providerList" [list-formatter]="myListFormatter"
                               placeholder="Doctor Incharge name" display-property-name="FullName" value-property-name=null (valueChanged)="loadDrIncharge()"
                               min-chars="0" max-num-list="10" formControlName="DoctorInchargeId" />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('DoctorInchargeId')" [hidden]="CurrentDischargeSummary.IsValidCheck('DoctorInchargeId','required')">Doctor Incharge is required</span>
                      </div>
                    </div>

                    <!--<div class="form-group">
        <label class="control-label col-md-4">Anasthetists <b style="float:right;">:</b></label>
        <div class="col-md-8">

            <select class="form-control" [(ngModel)]="CurrentDischargeSummary.AnaesthetistsId"
                    [ngModelOptions]="{standalone: true}">
                <option *ngFor="let emp of providerList"
                        value="{{emp.EmployeeId}}">
                    {{emp.Salutation}}.{{emp.FirstName}} {{emp.MiddleName}} {{emp.LastName}}
                </option>
            </select>
        </div>
    </div>-->

                    <div class="form-group">
                      <label class="control-label col-md-4">Anasthetists<b style="float:right">:</b></label>
                      <div class="col-md-8">
                        <input danphe-auto-complete class="form-control" [(ngModel)]="anasthetists" [source]="AnasthetistsList" [list-formatter]="ListFormatter"
                               placeholder="Anasthetists name" display-property-name="FullName" value-property-name=null (valueChanged)="loadAnasthetists()"
                               min-chars="0" max-num-list="10" [ngModelOptions]="{standalone: true}" />
                      </div>
                    </div>

                    <div class="form-group">
                      <label class="control-label col-md-4">
                        Diagnosis<b class="color-red"> *</b><b style="float:right;">:</b>
                      </label>
                      <div class="col-md-8">
                        <!-- <div class="form-group" style="padding:10px;"> -->
                        <input danphe-auto-complete autocomplete="off" class="form-control" [(ngModel)]="diagnosis"
                               [source]="icd10List" [list-formatter]="DignosisFormatter"
                               placeholder="Select ICD10(s)" display-property-name="icd10Description"
                               value-property-name="ICD10Id" (valueChanged)="loadICDs()" min-chars="0"
                               max-num-list="10" [ngModelOptions]="{standalone: true}" />

        <!-- <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Diagnosis')" [hidden]="CurrentDischargeSummary.IsValidCheck('Diagnosis','maxlength')">Diagnosis must be less than 1000 characters.</span>
        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Diagnosis')" [hidden]="CurrentDischargeSummary.IsValidCheck('Diagnosis','required')">Diagnosis information is mandatory.</span>  -->
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Case Summary<b class="color-red">  *</b><b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" rows="10" maxlength="1000" formControlName="CaseSummary" [(ngModel)]="CurrentDischargeSummary.CaseSummary" placeholder="CaseSummary"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('CaseSummary')" [hidden]="CurrentDischargeSummary.IsValidCheck('CaseSummary','maxlength')">Case Summary must be less than 1000 characters</span>
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('CaseSummary')" [hidden]="CurrentDischargeSummary.IsValidCheck('CaseSummary','required')">Case Summary is mandatory.</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Condition On Discharge<b class="color-red">  *</b><b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="Condition" [(ngModel)]="CurrentDischargeSummary.Condition" placeholder="Condition"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Condition')" [hidden]="CurrentDischargeSummary.IsValidCheck('Condition','maxlength')">Condition must be less than 1000 characters</span>
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Condition')" [hidden]="CurrentDischargeSummary.IsValidCheck('Condition','required')">Condition is mandatory.</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Treatment During<b style="float:right;">:</b><br />Hospital Stay</label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="Treatment" [(ngModel)]="CurrentDischargeSummary.Treatment" placeholder="Treatment during hospital stay"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Treatment')" [hidden]="CurrentDischargeSummary.IsValidCheck('Treatment','maxlength')">Treatment must be less than 1000 characters</span>
                        <!--<span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Treatment')" [hidden]="CurrentDischargeSummary.IsValidCheck('Treatment','required')">Treatment is mandatory.</span>-->
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Operative Procedure<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="OperativeProcedure" [(ngModel)]="CurrentDischargeSummary.OperativeProcedure" placeholder="OperativeProcedure "></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('OperativeProcedure')" [hidden]="CurrentDischargeSummary.IsValidCheck('OperativeProcedure','maxlength')">Operative Procedure must be less than 1000 characters</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Operative Findings<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="OperativeFindings" [(ngModel)]="CurrentDischargeSummary.OperativeFindings" placeholder="OperativeFindings "></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('OperativeFindings')" [hidden]="CurrentDischargeSummary.IsValidCheck('OperativeFindings','maxlength')">Operative Findings must be less than 1000 characters</span>
                      </div>
                    </div>

                  </div>
                  <div class="col-md-6 col-xs-12">
                    <div class="form-group">
                      <label class="control-label col-md-4">Histology Report<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="HistologyReport" [(ngModel)]="CurrentDischargeSummary.HistologyReport" placeholder="HistologyReport"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('HistologyReport')" [hidden]="CurrentDischargeSummary.IsValidCheck('HistologyReport','maxlength')">Histology Report must be less than 1000 characters</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Special Notes<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="SpeicialNotes" [(ngModel)]="CurrentDischargeSummary.SpeicialNotes" placeholder="Special Notes"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('SpeicialNotes')" [hidden]="CurrentDischargeSummary.IsValidCheck('SpeicialNotes','maxlength')">Special Notes must be less than 1000 characters</span>
                      </div>
                    </div>
                    <b style="text-decoration:underline;">Investigations</b>
                    <div *ngIf="labRequests" style="padding-top: 10px;">
                      <table class="table-bordered" style="width:95%">
                        <thead>
                          <tr>
                            <th width="180" align="center">Lab Tests</th>
                            <th width="180" align="center">Add New Tests</th>
                          </tr>
                        </thead>
                        <tbody style="height: 170px;overflow: auto;">
                         <tr>
                           <td>
                              <tr *ngFor="let tst of labRequests;let i=index;">
                                  <td>
                                    <span>{{tst.TestName}}</span>
                                  </td>
                                  <td>
                                    <input class="zoomcheckbox" [(ngModel)]="tst.IsSelectTest"
                                           name="IsSelected" width="100" type="checkbox"
                                           ng-checked="tst.IsSelectTest=true"
                                           (change)="LabTestSelection(i)"
                                           [ngModelOptions]="{standalone: true}">
                                  </td>
                                </tr>
                           </td>
                           <td>
                              <input autocomplete="off" danphe-auto-complete
                              class="form-control" [(ngModel)]="labtest"
                              [source]="LabTestList"
                              [list-formatter]="labTestFormatter"
                              placeholder="Add New Test" onClick="this.select();"
                              display-property-name="LabTestName"
                              value-property-name="LabTestId"
                              (valueChanged)="loadlabTest()" min-chars="0"
                              max-num-list="10"
                              [ngModelOptions]="{standalone: true}" />
                       <table style="padding: 10px;" *ngIf="AddedTests">
                         <tr *ngFor="let tst of AddedTests;let i=index;"
                             style="padding:2px;">
                           <td style="padding-left: 5px;">
                             <span>{{tst.TestName}}</span>
                           </td>
                           <td>
                             <input type="button" style="border-radius:1px;"
                                    class="btn btn-danger btn-sm"
                                    (click)="RemoveAddedTest(i)" value="X">
                           </td>
                         </tr>
                       </table>
                           </td>
                         </tr>
                        </tbody>
                      </table>
                    </div>
                    <div>

                      <!--commented: sud-9Aug, Use this once Lab-Module is implemented properly, until then display only the requisitions-->
                      <!--<div *ngIf="labResults">
          <div>
              <h5><b>{{labResults.TemplateName}}</b></h5>
          </div>
          <table>
              <thead>
                  <tr>
                      <th width="180" align="center" class="BillCreditHdr">Component</th>
                      <th width="150" align="center" class="BillCreditHdr">Value</th>
                      <th width="150" align="center" class="BillCreditHdr">Unit</th>
                      <th width="115" align="center" class="BillCreditHdr">Range</th>
                      <th width="100" align="center" class="BillCreditHdr">Remark</th>
                  </tr>
              </thead>
              <tr *ngFor="let comp of labResults.Components">
                  <td><input value="{{comp.Component}}" readonly="readonly" /></td>
                  <td><input value="{{comp.Value}}" readonly="readonly" /></td>
                  <td><input value="{{comp.Unit}}" readonly="readonly" /></td>
                  <td><input value="{{comp.Range}}" readonly="readonly" /></td>
                  <td><input value="{{comp.Remarks}}" readonly="readonly" /></td>

              </tr>
          </table>
      </div>-->
                      <!--commented: sud-9Aug, Un-COmment it after imaging results starts coming here.-->
                      <div *ngIf="imagingResults" style="margin-top: 15px;">

                        <table class="table-bordered" style="width:95%">
                          <thead>
                            <tr>
                              <th width="180" align="center">Imagings</th>
                            </tr>
                          </thead>
                          <tr *ngFor="let img of imagingResults">
                            <td><input value="{{img.ImagingItemName}}" readonly="readonly" /></td>
                            <!--<td><input value="{{img.ImagingTypeName}}" readonly="readonly" /></td>
            <td><input value="{{img.ReportText}}" readonly="readonly" /></td>-->
                            <!--tr-->
                          </tr>
                        </table>

                      </div>
                    </div>
                    <div class="form-group" style="padding-top: 10px;">
                      <table class="table-bordered" style="width:95%">
                        <div class="col-md-12">
                          <label class="control-label col-md-4">
                            <b>Medications</b>  <!--<b style="float:right;">:</b> -->
                          </label>
                            <!-- <textarea class="form-control" maxlength="1000" formControlName="Medications"
            [(ngModel)]="CurrentDischargeSummary.Medications"
            placeholder="Medications"></textarea><br /> -->
                            <!-- <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Medications')"
                [hidden]="CurrentDischargeSummary.IsValidCheck('Medications','maxlength')">Medications
                must be less than 1000 characters</span> -->
                          <!-- </div> -->
                        </div>
                      <!-- </table>
                      <table class="table-bordered" style="width:95%"> -->
                   
                          <div class="col-md-12">
                           <div class="col-md-3">
                                    <!-- <select [(ngModel)]="medicationtype" title="Select Medicine Type"
                                    [ngModelOptions]="{standalone: true}" style="width:160px;height:30px;">
                                    <option value="0">New Medicines</option>
                                    <option value="1">Continue Old Medicines</option>
                                    <option value="2">Stop Old Medicines</option>
                            </select> -->
                            <label title="New Medicines" max="10" style="width:160px;overflow: hidden;">New Medicines</label>    
                            </div> 
                            <div class="col-md-9">
                                <tr *ngFor="let med of NewMedications;let i=index">
                               <td class="form-group">
                                                <form [formGroup]="med.DischargeSummaryMedicationValidator" >
                                                  <input type="test" formControlName="Medicine" style="width:100px;"  title="Enter Medicine"
                                                         [(ngModel)]="med.Medicine" max="100" placeholder="Medicine"
                                                         name="Medicine" />
                                                  <br />
                                                  <span class="color-red" *ngIf="med.IsDirty('Medicine')"
                                                        [hidden]="med.IsValidCheck('Medicine','maxlength')">Required</span>
                                                        <span class="color-red" *ngIf="med.IsDirty('Medicine')" [hidden]="med.IsValidCheck('Medicine','required')">Required</span>
                                                </form>
                                              </td> 
                                              <td class="form-group"  style="padding-left: 5px;">
                                                <form [formGroup]="med.DischargeSummaryMedicationValidator">
                                                  <select formControlName="FrequencyId" [(ngModel)]="med.FrequencyId" placeholder="Frequency"  style="width:90px;height: 25px;" title="Select Dosage Frequency">
                                                    <option *ngFor="let frq of medicationFrequency"
                                                            value="{{frq.FrequencyId}}">
                                                      {{frq.Type}}
                                                    </option>
                                                  </select>
                                                  <span class="color-red" *ngIf="med.IsDirty('FrequencyId')"
                                                        [hidden]="med.IsValidCheck('FrequencyId','required')">Required</span>
                                                </form>
                                              </td>
                                              <td class="form-group"  style="padding-left: 5px;">
                                                <form [formGroup]="med.DischargeSummaryMedicationValidator">
                                                  <input type="test" max="100" [(ngModel)]="med.Notes" style="width:100px;"
                                                         [ngModelOptions]="{standalone: true}" placeholder="Notes"
                                                         name="Note" />
                                                </form>
                                              </td>
                                              <td  style="padding-left: 5px;">
                                                <input type="button" style="border-radius:1px;"
                                                       class="btn btn-info btn-sm" title="Add new Medicine"
                                                       (click)="AddMedicine(0)" value="+">
                                              </td>
                                              <td  style="padding-left: 2px;">
                                                <input type="button" style="border-radius:1px;" title="Delete Medicine"
                                                       class="btn btn-danger btn-sm" (click)="RemoveMedicine(i,0)"
                                                       value="X">
                                              </td>
                                </tr>
                            </div>
                          </div>
                          <div class="col-md-12">
                              <div class="col-md-3">
                               <label title="Old Medicines" max="10" style="width:160px;overflow: hidden;">Old Medicines Continue</label>    
                               </div> 
                               <div class="col-md-9">
                                   <tr *ngFor="let med of OldMedications;let i=index">
                                     
                                  <td class="form-group">
                                                   <form [formGroup]="med.DischargeSummaryMedicationValidator" >
                                                     <input type="test" formControlName="Medicine" style="width:100px;"  title="Enter Medicine"
                                                            [(ngModel)]="med.Medicine" max="100" placeholder="Medicine"
                                                            name="Medicine" />
                                                     <br />
                                                     <span class="color-red" *ngIf="med.IsDirty('Medicine')"
                                                           [hidden]="med.IsValidCheck('Medicine','maxlength')">Required</span>
                                                           <span class="color-red" *ngIf="med.IsDirty('Medicine')" [hidden]="med.IsValidCheck('Medicine','required')">Required</span>
                                                   </form>
                                                 </td> 
                                                 <td class="form-group"  style="padding-left: 5px;">
                                                   <form [formGroup]="med.DischargeSummaryMedicationValidator">
                                                     <select formControlName="FrequencyId" [(ngModel)]="med.FrequencyId" placeholder="Frequency"  style="width:90px;height: 25px;" title="Select Dosage Frequency">
                                                       <option *ngFor="let frq of medicationFrequency"
                                                               value="{{frq.FrequencyId}}">
                                                         {{frq.Type}}
                                                       </option>
                                                     </select>
                                                     <span class="color-red" *ngIf="med.IsDirty('FrequencyId')"
                                                           [hidden]="med.IsValidCheck('FrequencyId','required')">Required</span>
                                                   </form>
                                                 </td>
                                                 <td class="form-group"  style="padding-left: 5px;">
                                                   <form [formGroup]="med.DischargeSummaryMedicationValidator">
                                                     <input type="test" max="100" [(ngModel)]="med.Notes" style="width:100px;"
                                                            [ngModelOptions]="{standalone: true}" placeholder="Notes"
                                                            name="Note" />
                                                   </form>
                                                 </td>
                                                 <td  style="padding-left: 5px;">
                                                   <input type="button" style="border-radius:1px;"
                                                          class="btn btn-info btn-sm" title="Add new Medicine"
                                                          (click)="AddMedicine(1)" value="+">
                                                 </td>
                                                 <td  style="padding-left: 2px;">
                                                   <input type="button" style="border-radius:1px;" title="Delete Medicine"
                                                          class="btn btn-danger btn-sm" (click)="RemoveMedicine(i,1)"
                                                          value="X">
                                                 </td>
                                   </tr>
                               </div>
                             </div>
                          <div class="col-md-12">
                                <div class="col-md-3">
                                 <label title="Stop old Medicines" max="10" style="width:160px;overflow: hidden;">Stop Old Medicines</label>    
                                 </div> 
                                 <div class="col-md-9">
                                     <tr *ngFor="let med of StoppedOldMedications;let i=index">
                                      
                                    <td class="form-group">
                                                     <form [formGroup]="med.DischargeSummaryMedicationValidator" >
                                                       <input type="test" formControlName="Medicine" style="width:100px;"  title="Enter Medicine"
                                                              [(ngModel)]="med.Medicine" max="100" placeholder="Medicine"
                                                              name="Medicine" />
                                                       <br />
                                                       <span class="color-red" *ngIf="med.IsDirty('Medicine')"
                                                             [hidden]="med.IsValidCheck('Medicine','maxlength')">Required</span>
                                                             <span class="color-red" *ngIf="med.IsDirty('Medicine')" [hidden]="med.IsValidCheck('Medicine','required')">Required</span>
                                                     </form>
                                                   </td> 
                                    <td class="form-group"  style="padding-left: 5px;">
                                                     <form [formGroup]="med.DischargeSummaryMedicationValidator">
                                                       <select formControlName="FrequencyId" [(ngModel)]="med.FrequencyId" placeholder="Frequency"  style="width:90px;height: 25px;" title="Select Dosage Frequency">
                                                         <option *ngFor="let frq of medicationFrequency"
                                                                 value="{{frq.FrequencyId}}">
                                                           {{frq.Type}}
                                                         </option>
                                                       </select>
                                                       <span class="color-red" *ngIf="med.IsDirty('FrequencyId')"
                                                             [hidden]="med.IsValidCheck('FrequencyId','required')">Required</span>
                                                     </form>
                                                   </td>
                                    <td class="form-group"  style="padding-left: 5px;">
                                                     <form [formGroup]="med.DischargeSummaryMedicationValidator">
                                                       <input type="test" max="100" [(ngModel)]="med.Notes" style="width:100px;"
                                                              [ngModelOptions]="{standalone: true}" placeholder="Notes"
                                                              name="Note" />
                                                     </form>
                                                   </td>
                                    <td  style="padding-left: 5px;">
                                                     <input type="button" style="border-radius:1px;"
                                                            class="btn btn-info btn-sm" title="Add new Medicine"
                                                            (click)="AddMedicine(2)" value="+">
                                                   </td>
                                    <td  style="padding-left: 2px;">
                                                     <input type="button" style="border-radius:1px;" title="Delete Medicine"
                                                            class="btn btn-danger btn-sm" (click)="RemoveMedicine(i,2)"
                                                            value="X">
                                                   </td>
                                     </tr>
                                 </div>
                               </div>
                      </table>

                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Allergies<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="Allergies"
                                  [(ngModel)]="CurrentDischargeSummary.Allergies"
                                  placeholder="Allergies"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Allergies')"
                              [hidden]="CurrentDischargeSummary.IsValidCheck('Allergies','maxlength')">
                          Allergies
                          must be less than 1000 characters
                        </span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Activities <b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="Activities"
                                  [(ngModel)]="CurrentDischargeSummary.Activities"
                                  placeholder="Activities"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Activities')"
                              [hidden]="CurrentDischargeSummary.IsValidCheck('Activities','maxlength')">
                          Activities
                          must be less than 1000 characters
                        </span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Diet<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="Diet"
                                  [(ngModel)]="CurrentDischargeSummary.Diet" placeholder="Diet"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Diet')"
                              [hidden]="CurrentDischargeSummary.IsValidCheck('Diet','maxlength')">
                          Diet must be
                          less than 1000 characters
                        </span>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">RestDays<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <input class="form-control" type="number" min="0" max="120"
                               [ngModelOptions]="{standalone: true}" [(ngModel)]="CurrentDischargeSummary.RestDays"
                               placeholder="Rest Days" />
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">FollowUp<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <input class="form-control" type="number" min="0" max="120"
                               [ngModelOptions]="{standalone: true}" [(ngModel)]="CurrentDischargeSummary.FollowUp"
                               placeholder="Follow Up" />
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-md-4">Others<b style="float:right;">:</b></label>
                      <div class="col-md-8">
                        <textarea class="form-control" maxlength="1000" formControlName="Others"
                                  [(ngModel)]="CurrentDischargeSummary.Others"
                                  placeholder="extra comments"></textarea><br />
                        <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('Others')"
                              [hidden]="CurrentDischargeSummary.IsValidCheck('Others','maxlength')">
                          Extra comments
                          must be less than 1000 characters
                        </span>
                      </div>
                    </div>

                    <!--<div class="form-group">
        <label class="control-label col-md-4">Residence Dr<b style="float:right;">:</b></label>
        <div class="col-md-8">

            <select class="form-control" [(ngModel)]="CurrentDischargeSummary.ResidenceDrId"
                    [ngModelOptions]="{standalone: true}">
                <option *ngFor="let emp of providerList"
                        value="{{emp.EmployeeId}}">
                    {{emp.Salutation}}.{{emp.FirstName}} {{emp.MiddleName}} {{emp.LastName}}
                </option>
            </select>
            <span class="color-red" *ngIf="CurrentDischargeSummary.IsDirty('ResidenceDrId')" [hidden]="CurrentDischargeSummary.IsValidCheck('ResidenceDrId','required')">Residence Doctor is required</span>
        </div>
    </div>-->

                    <div class="form-group">
                      <label class="control-label col-md-4">Residence Dr<b style="float:right">:</b></label>
                      <div class="col-md-8">
                        <input danphe-auto-complete class="form-control" [(ngModel)]="residenceDr"
                               [source]="providerList" [list-formatter]="myListFormatter"
                               placeholder="Residence Dr name" display-property-name="FullName"
                               value-property-name=null (valueChanged)="loadResidenceDr()" min-chars="0"
                               max-num-list="10" [ngModelOptions]="{standalone: true}" />
                      </div>
                    </div>

                  </div>
                </div>
            </div>
        </form>
        <!--Model Box Starting Here-->
        <div class="popup-static portlet box portlet-fullscreen" *ngIf="showUnpaidPopupBox">
            <div class="portlet-body form">
                <!--Model Box Body Start-->
                <div class="form-body">
                    <div class="col-md-12">
                        <div class="col-md-2 hidden-xs hidden-sm" style="margin-right: 24px;">
                        </div>
                        <div class="col-md-8 col-sm-12 col-xs-12 modelbox-div" style="margin-right: 24px;">
                            <div class="col-md-12">
                                <b>
                                    <u style="color:#bd8111">Alert ! This patient has unpaid bills, Please clear them
                                        and proceed to discharge.</u>
                                    <br />
                                    <button type="button" class="btn btn-primary btn-sm" (click)="Close()">
                                        OK
                                    </button>
                                </b>
                                <hr />
                            </div>
                            <br />

                            <div class="col-md-12" style="padding-bottom: 18px;">
                                <b>Proceed with pending bills ? </b><br />
                                Remarks *:<textarea class="form-control" maxlength="100"
                                    [(ngModel)]="admission.DischargeRemarks" placeholder="Remarks"></textarea><br />
                                <div class="color-red" *ngIf="!admission.DischargeRemarks">DischargeRemarks is
                                    mandatory.</div>
                                <button type="button" class="btn btn-primary btn-sm"
                                    (click)="DischargeWithPendingBills()">
                                    Discharge Anyway
                                </button>
                            </div>
                        </div>
                        <!--<div class="col-md-2 hidden-xs hidden-sm" style="margin-right: 24px;">
                        </div>-->
                    </div>
                </div>
                <!--Model Box Body End-->
            </div>
        </div>

    </div>
</div>


 <div *ngIf="showBirthCertificate"  style="padding: 80px;margin-top: -110px;">
    <button class="btn btn-primary btn-sm" (click)="CloseEditReport()">
        <i class="fa fa-backward"></i>&nbsp;&nbsp;&nbsp;Back To Discharge Summary Report
    </button>
    <generate-birth-certificate [showBirthCertificate]="showBirthCertificate" [selectedBaby]="selectedBaby" [CurrentDischargeSummary]="CurrentDischargeSummary">
    </generate-birth-certificate>
</div>  

<div *ngIf="showDeathCertificate" style="padding: 80px;margin-top: -110px;">
    <button class="btn btn-primary btn-sm" (click)="CloseEditReport()">
        <i class="fa fa-backward"></i>&nbsp;&nbsp;&nbsp;Back To Discharge Summary Report
    </button>
    <generate-death-certificate [showDeathCertificate]="showDeathCertificate" [selectedPatient]="selectedDischarge" [CurrentDischargeSummary]="CurrentDischargeSummary">
    </generate-death-certificate>
</div>  
